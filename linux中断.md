# linux中断

从stm32中断入手，到裸机的中断编写再到linux框架下的中断

## STM32中断

①、**中断向量表**：中断向量表存放的是**中断向量**。**中断服务程序的入口地址**或存放中断服务程序的首地址成为中断向量，因此中断向量表是一系列**中断服务程序入口地址**组成的表。这些中断服务程序(函数)在中断向量表中的位置是由半导体厂商定好的，当某个中断被触发以后就会自动跳转到中断向量表中对应的中断服务程序(函数)入口地址处。中断向量表在整个程序的最前面。

**中断向量表让CPU知道中断对应的中断服务函数。**

ARM 处理器都是从地址 0X00000000 开始运行的，但是我们STM32 代码是下载到 0X8000000 开始的存储区域中。因此**中断向量表是存放到 0X8000000** 地址处的，Cortex-M 架构引入了一个新的概念——中断向量表偏移，通过**中断向量表偏移**就可以将中断向量表存放到**任意地址**处，中断向量表偏移配置通过向 **SCB_VTOR** 寄存器写入新的中断向量表首地址即可。

同样Cortex_A系列的内核也会有这两个概念，只是操作的寄存器不同罢了。

②、**NVIC(内嵌向量中断控制器)**。**使能和关闭指定的中断，设定中断的优先级。** 

Cortex-A系列的是**GIC中断控制器**。

③、**中断使能。**

④、**中断服务函数。**当中断发生以后中断服务函数就会被调用，我们要处理的工作就可以放到中断服务函数中去完成。

## linux裸机中断

1.使能中断，初始化相应的寄存器。

2.注册中断服务函数，也就是向 irqTable 数组的指定标号处写入中断服务函数

3.中断发生以后进入 IRQ 中断服务函数，在 IRQ 中断服务函数在数组 irqTable 里面查找具体的中断处理函数，找到以后执行相应的中断处理函数。

